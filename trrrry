    requestStatus=req.body.requestStatus
    requestId=req.body.requestId;
    if (requestStatus=="ACCEPTED" && requestId){
    eventId= req.body.event_id;
    assQty= req.body.assign_quantity;
    itemId=req.params.id
    itemSN= req.body.assignedSerialNumbers
    assLocation = req.body.location
    username=req.body.staff_username
    status= req.body.status
    category=req.body.category
    comment=req.body.comment
    event={}
    //if (eventId && assQty && itemId && assLocation && username && status && category && )
    if (eventId && assQty){
        getEventById(eventId)
        .then(data=>{
            if (data.length>0){
                event.eventId=eventId
                event.assQty=assQty
                event.eventQty= JSON.stringify(data[0][0].quantity)
                event.eventLocation= JSON.stringify(data[0][0].location)
                event.assLocation=assLocation;
                event.itemId=itemId
                // don't forget to add conditionals to compare eventqty and assqty
                splitEvent(event)
                .then(data=>{
                    if (data.length>0){
                        assign=data[0]
                        console.log("yea")
                        console.log(assign)
                        assignEvent(assign,username)
                        .then(data=>{
                            if (data=="success"){
                                updateRequest(requestId,requestStatus)
                                .then(data=>{
                                    if (data=="success"){
                                        console.log("Request updated")
                                        
                                    }else{
                                        console.log("Request not updated")
                                    
                                    }
                                    
                                })
                                res.status(200)
                                res.json({
                                    success:true,
                                    message:"Asset assigned successfully"
                                })
                            }
                        })
                    }else{
                        res.status(400)
                        res.json({
                            success:false,
                            message:"Asset not assigned"
                        })
                    }
                })
            }else{
                res.status(400)
                res.json({
                    success:false,
                    message:"Event not found"
                })
            }
        })
    }
    
    }else{
        
       if (requestStatus=="NOT GRANTED" && requestId){
            updateRequest(requestId,requestStatus)
            .then(data=>{
                if (data=="success"){
                    res.status(200)
                    res.json({
                        success:true,
                        message:"Request updated"
                    })
                }else{
                    res.status(400)
                    res.json({
                        success:false,
                        message:"Request not updated"
                    })
                }
                
            })
        }else{
            res.status(401)
            res.json({
                success:false,
                message:"Enter correct details"
            })
            res.end()
        }
    }